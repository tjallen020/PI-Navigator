<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QI Tool Selector Overview</title>
    <style>
      :root {
        color-scheme: light dark;
      }
      body {
        font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", sans-serif;
        margin: 0;
        background: #0f172a;
        color: #f8fafc;
        line-height: 1.6;
      }
      main {
        max-width: 960px;
        margin: 0 auto;
        padding: 3rem 1.5rem 4rem;
      }
      h1,
      h2,
      h3 {
        color: #38bdf8;
        line-height: 1.3;
      }
      p,
      li,
      code,
      pre {
        font-size: 1rem;
      }
      pre {
        background: rgba(30, 41, 59, 0.7);
        border-radius: 0.5rem;
        padding: 1rem;
        overflow-x: auto;
      }
      code {
        background: rgba(148, 163, 184, 0.2);
        padding: 0.15rem 0.35rem;
        border-radius: 0.35rem;
      }
      ul,
      ol {
        padding-left: 1.4rem;
      }
      section {
        margin-bottom: 2.75rem;
      }
      .hero {
        background: linear-gradient(135deg, rgba(45, 212, 191, 0.15), rgba(59, 130, 246, 0.25));
        border-radius: 1.25rem;
        padding: 2.5rem 2rem;
        margin-bottom: 3rem;
        box-shadow: 0 20px 50px rgba(15, 23, 42, 0.45);
      }
      .hero p {
        font-size: 1.1rem;
        max-width: 52ch;
      }
      a {
        color: #f472b6;
      }
      footer {
        text-align: center;
        font-size: 0.875rem;
        color: #cbd5f5;
        margin-top: 4rem;
      }
      @media (max-width: 640px) {
        main {
          padding: 2.5rem 1.2rem 3rem;
        }
        .hero {
          padding: 2rem 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <header class="hero">
        <h1>QI Tool Selector</h1>
        <p>
          QI Tool Selector accelerates problem solving for frontline care teams, managers, and facilitators. It provides a guided
          decision experience, plain-language explanations, sustainment nudges, and one-click A3 (9-box) exports for spreading
          improvement.
        </p>
      </header>

      <section>
        <h2>Project Layout</h2>
        <pre><code>.
├── apps
│   ├── backend   # Express + Prisma API
│   └── frontend  # React + Vite experience
├── docs          # OpenAPI specification and collateral
├── prisma        # Database schema and seed data (in backend app)
└── scripts       # Automation hooks (future use)</code></pre>
      </section>

      <section>
        <h2>Features</h2>
        <ul>
          <li><strong>Three experience modes</strong> (Fast Track, Guided, Facilitator) matched to frontline, manager, and QI facilitator personas.</li>
          <li><strong>Plain vs. technical labels</strong> toggle that persists per user.</li>
          <li>JSON-driven <strong>decision tree</strong> with complexity/resource filters and tailored rationales.</li>
          <li>Sustainment prompts for <strong>control plans, huddles, and 30/60/90 follow-ups</strong>.</li>
          <li>Feedback loop capturing effectiveness, time vs. value, and qualitative insights.</li>
          <li><strong>pptxgenjs-powered 9-box A3 export</strong> with placeholders for charts and logos.</li>
          <li>Role-based access with JWT auth (frontline, manager, facilitator, admin).</li>
          <li>Prisma data model aligned to the specification plus Vitest/RTL coverage for critical logic.</li>
          <li>Docker-ready structure with environment configuration.</li>
        </ul>
      </section>

      <section>
        <h2>Getting Started</h2>
        <h3>Prerequisites</h3>
        <ul>
          <li>Node.js 18+</li>
          <li>npm 9+</li>
          <li>(Optional) Docker &amp; docker-compose for containerised runs</li>
        </ul>
        <h3>Install dependencies</h3>
        <pre><code>npm install</code></pre>
        <p>This installs both backend and frontend workspaces and runs <code>prisma generate</code> automatically.</p>
        <h3>Environment variables</h3>
        <p>Copy the backend example environment file:</p>
        <pre><code>cp apps/backend/.env.example apps/backend/.env</code></pre>
        <p>Adjust values as needed. The default configuration uses a local SQLite database for development.</p>
        <h3>Database</h3>
        <p>Generate the SQLite database and seed reference data:</p>
        <pre><code>cd apps/backend
npx prisma migrate dev --name init
npm run prisma:seed
cd -</code></pre>
        <h3>Run the backend API</h3>
        <pre><code>cd apps/backend
npm run dev</code></pre>
        <p>The API listens on <code>http://localhost:4000</code> by default.</p>
        <h3>Run the frontend</h3>
        <p>In a separate terminal:</p>
        <pre><code>cd apps/frontend
npm run dev</code></pre>
        <p>The Vite dev server runs on <code>http://localhost:5173</code> and proxies API requests.</p>
        <h3>Testing</h3>
        <pre><code>npm test</code></pre>
        <p>This executes Vitest-based tests in both workspaces.</p>
      </section>

      <section>
        <h2>Docker</h2>
        <p>
          A Dockerfile and compose definition can be added to the <code>scripts/</code> folder for production deployment. The
          current structure aligns with multi-stage Node builds and Prisma migrations.
        </p>
      </section>

      <section>
        <h2>API documentation</h2>
        <p>
          An OpenAPI 3.0 document lives in <a href="openapi.yaml">docs/openapi.yaml</a>. Import it into tools such as Stoplight,
          Postman, or Redocly to explore available endpoints and payloads.
        </p>
      </section>

      <section>
        <h2>Accessibility &amp; UX</h2>
        <ul>
          <li>Uses semantic HTML, keyboard-focusable controls, ARIA-friendly dialog components, and WCAG 2.1 AA colour contrast.</li>
          <li>Supports plain language messaging by default, with a technical toggle for advanced users.</li>
          <li>Decision flows limit choices to five prompts before recommendations (per acceptance criteria).</li>
        </ul>
      </section>

      <section>
        <h2>Feedback &amp; Improvements</h2>
        <p>
          The <code>/feedback</code> endpoint feeds a lightweight learning system. The <code>/dashboard/usage</code> route
          (restricted to facilitator/admin) aggregates mode usage, tool/package frequency, and feedback sentiment, enabling
          continuous calibration.
        </p>
      </section>

      <section>
        <h2>Sample Workflow</h2>
        <ol>
          <li>Register as a facilitator to unlock all features.</li>
          <li>Toggle plain language labels as desired.</li>
          <li>Try Fast Track with goal “Incident → Near Miss” and <code>&lt;2h</code> resources.</li>
          <li>Review the Good Catch + Quick 5 Whys package with sustainment prompts.</li>
          <li>Export the auto-generated 9-box A3 to share with your team.</li>
          <li>Capture effectiveness feedback to improve recommendations.</li>
        </ol>
      </section>

      <section>
        <h2>License</h2>
        <p>
          This project is released for evaluation purposes. Tailor authentication, persistence, and deployment practices before
          production use.
        </p>
      </section>

      <footer>
        &copy; <span id="year"></span> QI Tool Selector &mdash; Built for healthcare improvement teams.
      </footer>
    </main>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
  </body>
</html>
